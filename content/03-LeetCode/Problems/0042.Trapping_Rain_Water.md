---
tags:
  - ds/2p
---
Link: [42. Trapping Rain Water](https://leetcode.com/problems/trapping-rain-water/) - Hard
# Question
### Restate the problem
- Given an integer array, means the bar heights
- The water level is determined by `min(left_max, right_max)`
- `max(0, min(highest_left, highest_right) - height[i])`
- Return the total trapped water
# Method
### Approach - Two pointers
- Set `left = 0`, `right = n - 1`
- Maintain
	- `left_max = max(height[0...left])`
	- `right_max = max(height[right...n-1)`
- While `left < right`:
	- If `left_max <= right_max`:
		- Move left
		- Water trapped at `left` is `left_max - height[left]`, avoid negative
		- Update `left_max`
	- Else:
		- Move right
		- Water trapped at `right` is `right_max - height[right`, avoid negative
		- Update `right_max`
#### Why it works
The smaller boundary determines the water level, so we can safely process the side with smaller max.

### Complexity
- Time complexity: O(n)
- Space complexity: O(1)
### Edge Case
- no height
### Code        
```python
class Solution:
    def trap(self, height: List[int]) -> int:
        left = 0
        right = len(height) - 1

        max_left = height[0]
        max_right = height[right]
        water = 0
        while left < right:
            
            if max_left <= max_right:
                left += 1
                water += max(0, max_left - height[left])
                max_left = max(height[left], max_left)
            else:
                right -= 1
                water += max(0, max_right - height[right])
                max_right = max(height[right], max_right)
        
        return water
```

---
# History
Jan-16-2026 Solved, need clear explanation, clear code