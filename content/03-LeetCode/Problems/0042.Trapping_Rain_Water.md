---
tags:
  - ds/twopointers
---
Link: [42. Trapping Rain Water](https://leetcode.com/problems/trapping-rain-water/) - Hard
Track: NeetCode150
# Question
### Restate the problem
- Given an integer array, means the bar heights
- The water level is determined by `min(left_max, right_max)`
- `max(0, min(highest_left, highest_right) - height[i])`
- Return the total trapped water
# Method
### Approach - Two pointers
- Set `left = 0`, `right = n - 1`
- Maintain
	- `left_max = max(height[0...left])`
	- `right_max = max(height[right...n-1)`
- While `left < right`:
	- If `left_max <= right_max`:
		- Move left
		- Update `left_max`
		- Water trapped at `left` is `left_max - height[left]`
	- Else:
		- Move right
		- Update `right_max`
		- Water trapped at `right` is `right_max - height[right`
#### Why it works
The smaller boundary determines the water level, so we can safely process the side with smaller max.

### Complexity
- Time complexity: O(n)
- Space complexity: O(1)
### Edge Case
- no height
### Code        
```python
class Solution:
    def trap(self, height: List[int]) -> int:
        if not height:
            return 0
        
        left, right = 0, len(height) - 1
        water = 0
        left_max = height[left]
        right_max = height[right]
        while left < right:
            if left_max <= right_max:
                left += 1
                left_max = max(left_max, height[left])
                water += left_max - height[left]
            else:
                right -= 1
                right_max = max(right_max, height[right])
                water += right_max - height[right]
        
        return water
```

---
# History
Jan-16-2026 Solved, need clear explanation, clear code