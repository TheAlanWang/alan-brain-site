---
tags:
  - ds/pfix
---
Link: [238. Product of Array Except Self](https://leetcode.com/problems/product-of-array-except-self/)
Track: NeetCode150
# Question
### Restate the problem
- Given integer array, calculate the product of all elements except `nums[i]`
- Return the array `res`

---

Method 1 - prefix O(n) O(1)
- Create prefix array and suffix array store the production

Method 2 - O(1)
## Method 1 - Brute force
### Approach
1. Create a prefix array and a suffix array.
2. Fill the prefix array with left-side products.
3. Fill the suffix array with right-side products.
4. Multiply `prefix[i]` and `suffix[i]` to get the result.

### Complexity
- Time Complexity: O(n)
- Space Complexity: O(n)
### Edge Case
- if only has one
- if has `0`

### Code
```python
class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
        n = len(nums)
        
        cur = 1
        prefix = [1] * n
        for i in range(1, n):
            cur *= nums[i - 1]
            prefix[i] = cur

        cur = 1
        suffix = [1] * n
        for i in range(n - 2, -1, -1): # 2, 1, 0
            cur *= nums[i + 1]
            suffix[i] = cur
        
        res = [1] * n
        for i in range(n):
            res[i] = prefix[i] * suffix[i]
        
        return res
```

## Method 2 - O(1)
### Code
```python
class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
        n = len(nums)
        
        res = [1] * n
        cur = 1
        for i in range(1, n):
            cur *= nums[i - 1]
            res[i] = cur

        cur = 1
        for i in range(n - 2, -1, -1):
            cur *= nums[i + 1]
            res[i] *= cur
        
        return res
```

---
# History
Jan-31-2026 Mock, solved w bug
- `for i in range(n - 2, -1, -1)`