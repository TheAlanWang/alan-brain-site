---
tags:
  - ds/backt
  - cm/adobe
---
Link: [93. Restore IP Addresses](https://leetcode.com/problems/restore-ip-addresses/) - Medium
# Question
### Restate the problem
Given s, contains only digit
Return possible IP address
Process: segment IP address, between 0 and 255, no leading `0`

---

Method 1 Pointer: not apply, Because pointer keep moving, hard to tell which cuts can be vallid.
Method 2 Backtracking. Choose a segment length
## Method - Backtracking
### Approach
- `dfs(idx, path)`
- Base case: 
	- if `idx > n`, return
	- if `idx == n and len(path) == 4`, append, return
- Try segment length(1, 2, 3)
	- next_idx = idx + length
	- `segment = s[idx: next_idx]`
	- if is_valid(segment): choose it and recurse `backtrack(next_idx, segment + [segment])`

### Complexity
- Time Complexity: O($3^4$) constant time
- Space Complexity: O(1)
### Edge Case

### Code        
```python
class Solution:
    def restoreIpAddresses(self, s: str) -> List[str]:
        n = len(s)
 
        def valid_part(part):
            num = int(part)
            if not (0 <= num <= 255):
                return False

            if len(part) > 1 and part[0] == '0':
                return False
            
            return True

        segment = []
        def dfs(start, path):
            if len(path) > 4:
                return

            if start == n and len(path) == 4: 
                segment.append(path[:])
                return
            
            for j in (1, 2, 3): # 0:1, 0:2, 0:3
                end = start + j # end is next start point
                if end > n:
                    break

                part = s[start: end]
                
                if valid_part(part):
                    path.append(part)
                    dfs(end, path)
                    path.pop()

        dfs(0, [])

        res = []
        for address in segment:
            res.append(".".join(address))

        return res
```

---
# History
Jan-21-2026 Hinted
- Spent a long time on deciding correct algorithm
- Got stuck on Boundary, `end` better to set as the next start 