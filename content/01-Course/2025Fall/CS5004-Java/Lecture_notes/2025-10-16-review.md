```java
List<String> list = new ArrayList<>();
list.add("Hello");
list.add("World");
// list.add(123); ❌ 编译直接报错

String s = list.get(1); // ✅ 不需要强制类型转换
System.out.println(s);
```

## Predicate
### Create own Predicate
> “Implement the interface and supporting classes so that  
> `listOfBooks.getList(new BookBefore(2000))` returns all books published before 2000.”
##### Step 1: Define `Predicate`  Generic Interface
In `interface` method only `declaration`, no implementation
- override in class `class BookBefore implements IPredicate<Book>`
```java
public interface IPredicate<T> {     
	boolean test(T item);
	}
```
#####  Step 2: 定义不同的条件类
BookBefore
```java
class BookBefore implements IPredicate<Book> {
    private int year;

    BookBefore(int year) {
        this.year = year;
    }

    @Override
    // override IPredicate interface
    public boolean test(Book b) {
        return b.getYear() < year;
    }
}
```

BookWithAuthor
```java
class BookWithAuthor implements IPredicate<Book> {
    private String author;

    BookWithAuthor(String author) {
        this.author = author;
    }

    @Override
    // override IPredicate interface
    public boolean test(Book b) {
        return b.getAuthor().equals(author);
    }
}

```
##### Step 3: 修改 IListOfBooks 接口
 ```java
 interface IListOfBooks {
    IListOfBooks getList(IPredicate<Book> pred);
}
 ```

##### Step 4: 在实现类中实现过滤逻辑
eg: `ConsListOfBooks`（非空节点）：
```java
class ConsListOfBooks implements IListOfBooks {
    Book first;
    IListOfBooks rest;

    ConsListOfBooks(Book first, IListOfBooks rest) {
        this.first = first;
        this.rest = rest;
    }

    @Override
    public IListOfBooks getList(IPredicate<Book> pred) {
        if (pred.test(first)) {
            return new ConsListOfBooks(first, rest.getList(pred));
        } else {
            return rest.getList(pred);
        }
    }
}
```
empty node
```java
class MtListOfBooks implements IListOfBooks {
    @Override
    public IListOfBooks getList(IPredicate<Book> pred) {
        return this;
    }
}
```
#### 3. result
```java
IListOfBooks lastCentury = listOfBooks.getList(new BookBefore(2000)); 
IListOfBooks allRowling  = listOfBooks.getList(new BookWithAuthor("Rowling"));
```

不需要写一堆 `allBefore()` / `allWithAuthor()`，  
以后要加新条件（比如按页数过滤）也很容易。
### use predicator
```java
import java.util.function.Predicate;

interface IListOfBooks {
    IListOfBooks getList(Predicate<Book> pred);
}

class MtListOfBooks implements IListOfBooks {
    @Override
    public IListOfBooks getList(Predicate<Book> pred) {
        return this; // 空列表过滤后还是空列表
    }
}

class ConsListOfBooks implements IListOfBooks {
    Book first;
    IListOfBooks rest;

    public ConsListOfBooks(Book first, IListOfBooks rest) {
        this.first = first;
        this.rest = rest;
    }

    @Override
    public IListOfBooks getList(Predicate<Book> pred) {
        IListOfBooks filteredRest = rest.getList(pred);

        if (pred.test(first)) {
            return new ConsListOfBooks(first, filteredRest);
        } else {
            return filteredRest;
        }
    }
}

```

#### call lambda
```java
IListOfBooks books = new ConsListOfBooks(
    new Book("Harry Potter", "Rowling", 1997),
    new ConsListOfBooks(
        new Book("Clean Code", "Martin", 2008),
        new MtListOfBooks()
    )
);

IListOfBooks oldBooks = books.getList(b -> b.getYear() < 2000);
IListOfBooks rowlingBooks = books.getList(b -> b.getAuthor().equals("Rowling"));
```

```java
b -> b.getYear() < 2000

new Predicate<Book>() {
    @Override
    public boolean test(Book b) {
        return b.getYear() < 2000;
    }
}
```